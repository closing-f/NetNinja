<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="401px" height="865px" viewBox="-0.5 -0.5 401 865" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2023-09-05T16:08:26.905Z&quot; agent=&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/14.6.13 Chrome/89.0.4389.128 Electron/12.0.7 Safari/537.36&quot; etag=&quot;RF_q3tEg113wpwimqUlT&quot; version=&quot;14.6.13&quot; type=&quot;device&quot;&gt;&lt;diagram name=&quot;第 1 页&quot; id=&quot;Uha1EkEa4kOYeyXbrqon&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><path d="M 5 26 L 5 0 L 395 0 L 395 26" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 5 26 L 5 270 L 395 270 L 395 26" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 5 26 L 395 26" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 388px; height: 1px; padding-top: 7px; margin-left: 6px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; font-weight: bold; white-space: normal; word-wrap: normal; ">TcpServer : enable_shared </div></div></div></foreignObject><text x="200" y="19" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle" font-weight="bold">TcpServer : enable_shared </text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 380px; height: 1px; padding-top: 33px; margin-left: 11px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; max-height: 100px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div>- vector&lt;Socket::ptr&gt; m_socks;//监听多个地址</div>- m_worker : IOManager* //新连接的Socket工作的调度器<div></div>- m_ioWorker: IOManager*<span>;// 用于处理读写事件的调度器</span><span>   <br /></span>- m_acceptWorker : <span>IOManager* ;//</span><span>服务器Socket接收连接的调度器<br /></span>- m_recvTimeout uint64_t <span>;</span><br />- m_isStop: bool;//服务是否停止<div><br /></div><div>    </div></div></div></div></foreignObject><text x="11" y="45" fill="#000000" font-family="Helvetica" font-size="12px">- vector&lt;Socket::ptr&gt; m_socks;//监听多个地址- m_worker : IOManager* //新连接的Socket...</text></switch></g><path d="M 5 134 L 395 134" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 380px; height: 1px; padding-top: 145px; margin-left: 11px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; max-height: 128px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">+ bool bind(...<span>) //绑定地址并监听，调用Socket的bind和listen方法<br /><br /># handleclient(...) //处理客户端连接<br /></span># startAccept(...) //调用Socket的accept方法，并将handleClient函数通过m_worker调度进去<br /></div></div></div></foreignObject><text x="11" y="157" fill="#000000" font-family="Helvetica" font-size="12px">+ bool bind(...) //绑定地址并监听，调用Socket的bind和listen方法...</text></switch></g><path d="M 200 330 L 200 278.12" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 200 271.12 L 203.5 278.12 L 196.5 278.12 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 0 356 L 0 330 L 400 330 L 400 356" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 0 356 L 0 470 L 400 470 L 400 356" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 0 356 L 400 356" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 398px; height: 1px; padding-top: 337px; margin-left: 1px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; font-weight: bold; white-space: normal; word-wrap: normal; ">HttpServer</div></div></div></foreignObject><text x="200" y="349" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle" font-weight="bold">HttpServer</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 390px; height: 1px; padding-top: 363px; margin-left: 6px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; max-height: 30px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">- isKeepalive: bool //是否支持长连接<br />- dispatch : ServletDispatch </div></div></div></foreignObject><text x="6" y="375" fill="#000000" font-family="Helvetica" font-size="12px">- isKeepalive: bool //是否支持长连接...</text></switch></g><path d="M 0 394 L 400 394" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 390px; height: 1px; padding-top: 405px; margin-left: 6px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; max-height: 68px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">//根据传入socket新建一个httpsession来接受请求；<br />// 通过ServletDispatch处理并保存请求<br />// 通过httpsession发送请求<br />+ handleClient(Socket::ptr client): void</div></div></div></foreignObject><text x="6" y="417" fill="#000000" font-family="Helvetica" font-size="12px">//根据传入socket新建一个httpsession来接受请求；...</text></switch></g><path d="M 25 783 L 25 757 L 335 757 L 335 783" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 25 783 L 25 861 L 335 861 L 335 783" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 25 783 L 335 783" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 308px; height: 1px; padding-top: 764px; margin-left: 26px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; font-weight: bold; white-space: normal; word-wrap: normal; ">Servlet</div></div></div></foreignObject><text x="180" y="776" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle" font-weight="bold">Servlet</text></switch></g><path d="M 25 787 L 335 787" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 300px; height: 1px; padding-top: 798px; margin-left: 31px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; max-height: 66px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; "><div>//根据request的url匹配到处理servlet进行处理，并将要发送的响应写入response</div><div>+ handle(HttpRequest::ptr request<span> ,HttpResponse::ptr response</span><span> ,HttpSession::ptr session) : int32_t</span></div><div><br /></div></div></div></div></foreignObject><text x="31" y="810" fill="#000000" font-family="Helvetica" font-size="12px">//根据request的url匹配到处理servlet进行处理，并将要发送的响应写入response...</text></switch></g><path d="M 180 724 L 180 744 L 180 737 L 180 748.88" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 180 755.88 L 176.5 748.88 L 183.5 748.88 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 30 546 L 30 520 L 330 520 L 330 546" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 30 546 L 30 724 L 330 724 L 330 546" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 30 546 L 330 546" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe center; width: 298px; height: 1px; padding-top: 527px; margin-left: 31px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; font-weight: bold; white-space: normal; word-wrap: normal; ">ServletDispatch : Servlet</div></div></div></foreignObject><text x="180" y="539" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle" font-weight="bold">ServletDispatch : Servlet</text></switch></g><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 290px; height: 1px; padding-top: 553px; margin-left: 36px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; max-height: 140px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">- mutex : RWMutex<br /> //精准匹配servlet MAP<br />- m_datas : map&lt;string,IServletCreator::ptr&gt; <br /><span><span>   </span></span><br />// 模糊匹配servlet 数组<br />- m_globs : vector&lt;pair&lt;string,IServletCreator::ptr&gt; &gt;<br /><br />- m_default : Servlet::ptr //默认servlet，所有路径都没匹配到时使用</div></div></div></foreignObject><text x="36" y="565" fill="#000000" font-family="Helvetica" font-size="12px">- mutex : RWMutex...</text></switch></g><path d="M 30 694 L 330 694" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe flex-start; justify-content: unsafe flex-start; width: 290px; height: 1px; padding-top: 705px; margin-left: 36px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; max-height: 22px; overflow: hidden; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: none; white-space: normal; word-wrap: normal; ">+ handle() override  </div></div></div></foreignObject><text x="36" y="717" fill="#000000" font-family="Helvetica" font-size="12px">+ handle() override  </text></switch></g><path d="M 180 470 L 180 480 L 180 513.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/><path d="M 180 518.88 L 176.5 511.88 L 180 513.63 L 183.5 511.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="none"/></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>