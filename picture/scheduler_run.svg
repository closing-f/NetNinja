<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="751px" height="652px" viewBox="-0.5 -0.5 751 652" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2023-09-05T16:04:57.864Z&quot; agent=&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/14.6.13 Chrome/89.0.4389.128 Electron/12.0.7 Safari/537.36&quot; etag=&quot;hugTTuktd-nrYIL8nhnc&quot; version=&quot;14.6.13&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;j39BeKSZk83gd--y38wb&quot; name=&quot;第 1 页&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><rect x="0" y="320" width="700" height="330" fill="none" stroke="#000000" pointer-events="all"/><path d="M 140 60 L 140 103.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 140 108.88 L 136.5 101.88 L 140 103.63 L 143.5 101.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="60" y="0" width="160" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 30px; margin-left: 61px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font style="font-size: 20px">Scheuduler::run</font></div></div></div></foreignObject><text x="140" y="34" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Scheuduler::run</text></switch></g><path d="M 140 170 L 140 213.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 140 218.88 L 136.5 211.88 L 140 213.63 L 143.5 211.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="62.5" y="110" width="155" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 153px; height: 1px; padding-top: 140px; margin-left: 64px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font style="font-size: 18px">设置当前线程的调度器和调度协程</font></div></div></div></foreignObject><text x="140" y="144" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">设置当前线程的调度器和调度协程</text></switch></g><rect x="190" y="100" width="20" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 120px; margin-left: 192px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><div style="color: rgb(171 , 178 , 191) ; background-color: rgb(40 , 44 , 52) ; font-family: &quot;consolas&quot; , &quot;courier new&quot; , monospace ; font-size: 21px ; line-height: 28px"><br /></div></div></div></div></foreignObject><text x="192" y="124" fill="#000000" font-family="Helvetica" font-size="12px">&#xa;</text></switch></g><path d="M 140 280 L 140 338.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 140 343.88 L 136.5 336.88 L 140 338.63 L 143.5 336.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="60" y="220" width="160" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 158px; height: 1px; padding-top: 250px; margin-left: 61px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font style="font-size: 18px">设置空闲线程，当无任务时执行</font></div></div></div></foreignObject><text x="140" y="254" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">设置空闲线程，当无任务时执行</text></switch></g><rect x="220" y="100" width="480" height="80" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 140px; margin-left: 222px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><font style="font-size: 18px">setThis() //所有线程中的调度器都是一个<br />t_scheduler_fiber = Fiber::GetThis().get();<br /></font><div style="font-size: 18px"><span><font style="font-size: 18px">//use_caller的线程不运行此句（已经在构造函数中设置）</font></span></div></div></div></div></foreignObject><text x="222" y="144" fill="#000000" font-family="Helvetica" font-size="12px">setThis() //所有线程中的调度器都是一个...</text></switch></g><rect x="220" y="230" width="530" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 250px; margin-left: 485px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><font style="font-size: 18px">Fiber::ptr idle_fiber(new Fiber(std::bind(&amp;Scheduler::idle, this)));</font></div></div></div></foreignObject><text x="485" y="254" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Fiber::ptr idle_fiber(new Fiber(std::bind(&amp;Scheduler::idle, this)));</text></switch></g><path d="M 140 405 L 140 425 L 140 423.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 140 428.88 L 136.5 421.88 L 140 423.63 L 143.5 421.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="80" y="345" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 375px; margin-left: 81px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font style="font-size: 18px">从协程任务队列中取出任务</font></div></div></div></foreignObject><text x="140" y="379" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">从协程任务队列中取出任务</text></switch></g><rect x="220" y="335" width="500" height="70" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 1px; height: 1px; padding-top: 370px; margin-left: 222px;"><div style="box-sizing: border-box; font-size: 0; text-align: left; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><font style="font-size: 16px">当有其他线程的任务协程任务或取出的任务有效时触发tickle()函数<br />（唤醒的协程不是要执行该任务的协程时，会再次调用tickle()函数，<br />直到那个协程被唤醒）</font></div></div></div></foreignObject><text x="222" y="374" fill="#000000" font-family="Helvetica" font-size="12px">当有其他线程的任务协程任务或取出的任务有效时触发tickle()函数...</text></switch></g><path d="M 140 500 L 140 520 L 140 533.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 140 538.88 L 136.5 531.88 L 140 533.63 L 143.5 531.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="11.25" y="430" width="257.5" height="70" rx="10.5" ry="10.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 256px; height: 1px; padding-top: 465px; margin-left: 12px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font style="font-size: 18px">根据任务类型执行:<br />如果是协程任务，执行协程，<br />如果是回调函数，执行回调函数</font></div></div></div></foreignObject><text x="140" y="469" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">根据任务类型执行:...</text></switch></g><rect x="70" y="540" width="140" height="60" rx="9" ry="9" fill="#ffe6cc" stroke="#d79b00" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 570px; margin-left: 71px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><font style="font-size: 16px">如果没有任务，执行idle协程(控制权转让）</font></div></div></div></foreignObject><text x="140" y="574" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">如果没有任务，执行idle协程(控制权转让）</text></switch></g><rect x="210" y="555" width="300" height="30" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 570px; margin-left: 360px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><font color="#ff0000" style="font-size: 17px">如果idle协程执行完，则退出run函数</font></div></div></div></foreignObject><text x="360" y="574" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">如果idle协程执行完，则退出run函数</text></switch></g><rect x="17" y="320" width="70" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 340px; margin-left: 52px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; "><font style="font-size: 20px">while</font></div></div></div></foreignObject><text x="52" y="344" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">while</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>